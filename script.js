// ============================================================================
// DATA STRUCTURES - Single source of truth for all configuration options
// ============================================================================

const distros = [
	{
		id: "archlinux",
		name: "Arch Linux",
		default: true,
		icon: `<svg viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M15.188 0.807c-1.354 3.313-2.167 5.484-3.672 8.703 0.922 0.979 2.057 2.12 3.896 3.406-1.979-0.818-3.328-1.635-4.339-2.484-1.927 4.026-4.948 9.75-11.073 20.76 4.818-2.781 8.547-4.495 12.026-5.151-0.146-0.641-0.234-1.333-0.229-2.063l0.005-0.151c0.078-3.089 1.682-5.458 3.583-5.297s3.38 2.792 3.307 5.88c-0.016 0.578-0.083 1.135-0.198 1.656 3.443 0.672 7.135 2.38 11.885 5.125-0.938-1.724-1.771-3.281-2.573-4.76-1.255-0.974-2.568-2.245-5.24-3.62 1.839 0.479 3.151 1.031 4.177 1.646-8.12-15.109-8.771-17.12-11.557-23.651z"/></svg>`,
	},
	{
		id: "fedora",
		name: "Fedora",
		icon: `<svg viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M16 0c-8.833 0-15.995 7.156-16 15.99v12.38c0.005 2.005 1.63 3.63 3.635 3.63h12.37c8.833-0.005 15.995-7.167 15.995-16 0-8.839-7.161-16-16-16zM22.125 7.438c-0.505 0-0.688-0.099-1.427-0.099-2.188 0-3.958 1.771-3.964 3.958v3.443c0 0.307 0.25 0.563 0.557 0.563h2.604c0.974 0 1.755 0.771 1.755 1.745 0 0.979-0.792 1.75-1.771 1.75h-3.146v3.979c0 1.99-0.792 3.901-2.198 5.313-1.411 1.406-3.323 2.198-5.313 2.198-0.563 0-1.12-0.073-1.656-0.224-0.854-0.224-1.547-0.922-1.547-1.729 0-0.979 0.714-1.693 1.776-1.693 0.505 0 0.687 0.099 1.427 0.099 2.188 0 3.958-1.771 3.964-3.958v-3.443c0-0.313-0.25-0.557-0.557-0.557h-2.604c-0.974 0-1.755-0.776-1.755-1.75 0-0.979 0.792-1.75 1.771-1.75h3.146v-3.979c0-4.146 3.359-7.51 7.51-7.51 0.625 0 1.073 0.073 1.656 0.224 0.849 0.224 1.547 0.922 1.547 1.729 0 0.979-0.714 1.693-1.776 1.693z"/></svg>`,
	},
	{
		id: "debian",
		name: "Debian",
		icon: `<svg viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M3.973 10.755c0.085-0.271 0.171-0.624 0.24-0.984l0.010-0.066c-0.437 0.55-0.212 0.662-0.25 1.037zM4.761 7.43c0.087 0.712-0.537 1 0.137 0.525 0.375-0.825-0.137-0.225-0.125-0.525zM16.562 1.154c0.327-0.062 0.734-0.115 1.146-0.147l0.041-0.003c-0.462 0.038-0.925 0.063-1.375 0.125l0.187 0.025zM27.378 14.53l-0.087 0.187c-0.145 1.031-0.448 1.963-0.885 2.814l0.023-0.049c0.472-0.854 0.803-1.852 0.933-2.912l0.004-0.040zM13.701 17.507c-0.153-0.187-0.283-0.401-0.381-0.633l-0.007-0.017c0.134 0.419 0.316 0.784 0.546 1.113l-0.009-0.013-0.15-0.45zM12.926 17.545l-0.062 0.35c0.298 0.477 0.628 0.89 1 1.262l-0-0c-0.3-0.587-0.525-0.825-0.937-1.625zM25.276 13.968c-0.028 0.687-0.2 1.328-0.487 1.901l0.012-0.027-0.437 0.226c-0.35 0.675 0.038 0.437-0.212 0.975-0.602 0.595-1.264 1.13-1.976 1.596l-0.048 0.030c-0.251 0 0.175-0.312 0.237-0.425-0.739 0.5-0.601 0.75-1.713 1.062l-0.038-0.075c-0.468 0.16-1.008 0.253-1.569 0.253-2.759 0-4.996-2.237-4.996-4.996 0-0.020 0-0.041 0-0.061l-0 0.003c-0.037 0.212-0.087 0.162-0.15 0.25-0.010-0.112-0.016-0.242-0.016-0.374 0-1.752 1.015-3.268 2.49-3.989l0.026-0.012c0.55-0.283 1.2-0.448 1.888-0.448 1.066 0 2.040 0.397 2.78 1.052l-0.004-0.004c-0.771-0.993-1.965-1.626-3.306-1.626-0.033 0-0.066 0-0.099 0.001l0.005-0c-1.417 0.013-2.649 0.792-3.303 1.943l-0.010 0.019c-0.75 0.475-0.837 1.837-1.162 2.076-0.068 0.337-0.107 0.724-0.107 1.12 0 2.225 1.232 4.161 3.051 5.165l0.030 0.015c0.337 0.237 0.1 0.262 0.15 0.437-0.752-0.362-1.388-0.85-1.906-1.443l-0.006-0.007c0.28 0.439 0.611 0.814 0.992 1.131l0.008 0.006c-0.687-0.225-1.587-1.625-1.849-1.687 1.162 2.074 4.724 3.65 6.574 2.874-0.164 0.012-0.355 0.019-0.547 0.019-0.845 0-1.658-0.135-2.419-0.385l0.055 0.016c-0.412-0.2-0.962-0.637-0.875-0.712 0.83 0.359 1.796 0.567 2.811 0.567 1.736 0 3.329-0.61 4.577-1.627l-0.013 0.010c0.55-0.437 1.162-1.175 1.337-1.187-0.25 0.4 0.050 0.2-0.15 0.55 0.55-0.9-0.25-0.375 0.575-1.55l0.3 0.412c-0.112-0.75 0.925-1.651 0.825-2.827 0.237-0.375 0.25 0.375 0 1.212 0.362-0.925 0.1-1.062 0.187-1.824 0.1 0.215 0.198 0.476 0.277 0.745l0.011 0.042c-0.015-0.121-0.023-0.262-0.023-0.405 0-0.581 0.138-1.13 0.382-1.615l-0.009 0.021c-0.112-0.062-0.35 0.375-0.4-0.662 0-0.462 0.125-0.25 0.175-0.35-0.252-0.292-0.423-0.66-0.474-1.066l-0.001-0.010c0.1-0.162 0.275 0.412 0.425 0.425-0.111-0.386-0.2-0.845-0.247-1.316l-0.003-0.034c-0.425-0.85-0.15 0.125-0.5-0.375-0.425-1.363 0.375-0.312 0.425-0.925 0.533 0.885 0.956 1.911 1.212 3.002l0.014 0.073c-0.151-0.837-0.363-1.575-0.64-2.28l0.028 0.081c0.2 0.087-0.325-1.551 0.262-0.462-0.805-2.376-2.428-4.295-4.526-5.464l-0.050-0.025c0.225 0.212 0.525 0.487 0.412 0.525-0.937-0.562-0.775-0.6-0.912-0.837-0.762-0.312-0.812 0.025-1.325 0-0.865-0.449-1.877-0.854-2.933-1.158l-0.119-0.029 0.062 0.287c-0.962-0.312-1.125 0.125-2.162 0-0.063-0.050 0.337-0.175 0.662-0.225-0.926 0.125-0.876-0.175-1.788 0.038 0.194-0.132 0.419-0.265 0.652-0.384l0.035-0.016c-0.75 0.050-1.799 0.437-1.475 0.087-1.776 0.642-3.315 1.483-4.697 2.52l0.046-0.033-0.036-0.275c-0.562 0.675-2.449 2.013-2.599 2.888l-0.164 0.037c-0.287 0.5-0.475 1.062-0.712 1.576-0.375 0.65-0.562 0.25-0.5 0.35-0.534 1.086-1.027 2.373-1.408 3.708l-0.041 0.169c0.074 0.691 0.116 1.493 0.116 2.305 0 0.402-0.010 0.802-0.031 1.199l0.002-0.056c-0.003 0.111-0.005 0.242-0.005 0.374 0 6.747 4.321 12.485 10.347 14.597l0.108 0.033c0.811 0.203 1.743 0.32 2.702 0.32 0.144 0 0.288-0.003 0.43-0.008l-0.021 0.001c-1.237-0.35-1.4-0.187-2.599-0.612-0.875-0.4-1.062-0.875-1.675-1.412l0.25 0.437c-1.213-0.425-0.712-0.525-1.701-0.837l0.262-0.337c-0.519-0.189-0.94-0.545-1.206-1.001l-0.006-0.011-0.425 0.012c-0.512-0.626-0.787-1.088-0.762-1.451l-0.139 0.25c-0.162-0.262-1.899-2.376-1-1.888-0.258-0.179-0.469-0.409-0.62-0.677l-0.005-0.010 0.175-0.212c-0.364-0.413-0.633-0.918-0.77-1.476l-0.005-0.024c0.131 0.198 0.326 0.345 0.555 0.411l0.007 0.002c-1.1-2.714-1.162-0.15-2.001-2.752l0.187-0.025c-0.104-0.174-0.213-0.383-0.309-0.599l-0.016-0.039 0.075-0.75c-0.787-0.925-0.225-3.876-0.112-5.501 0.338-0.964 0.709-1.781 1.142-2.5l0.037-0.065c0.306-0.562 0.644-1.098 1.005-1.606 0.291-0.396 0.595-0.778 0.913-1.143z"/></svg>`,
	},
	{
		id: "ubuntu",
		name: "Ubuntu",
		icon: `<svg viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M20.098 8.901c0.287 0.168 0.632 0.268 1 0.268 1.106 0 2.002-0.896 2.002-2.002s-0.896-2.002-2.002-2.002c-0.738 0-1.383 0.4-1.73 0.994l-0.005 0.010c-0.167 0.286-0.266 0.63-0.266 0.997 0 0.737 0.398 1.381 0.991 1.729l0.009 0.005zM16 10.152c3.047 0 5.549 2.331 5.822 5.307l0.002 0.023 2.855-0.043c-0.147-2.221-1.108-4.193-2.585-5.642l-0.001-0.001c-0.296 0.116-0.639 0.183-0.997 0.183-1.393 0-2.55-1.016-2.768-2.348l-0.002-0.016c-0.697-0.197-1.497-0.311-2.324-0.312h-0.001c-0.003 0-0.008 0-0.012 0-1.4 0-2.722 0.332-3.892 0.922l0.050-0.023 1.391 2.493c0.72-0.343 1.566-0.544 2.458-0.544 0.002 0 0.004 0 0.006 0h-0zM5.803 13.998c-0 0-0.001 0-0.001 0-1.106 0-2.002 0.896-2.002 2.002s0.896 2.002 2.002 2.002c1.106 0 2.002-0.896 2.002-2.002v0c0-0 0-0 0-0 0-1.105-0.896-2.001-2.001-2.002h-0zM10.152 16c0-0 0-0.001 0-0.001 0-1.971 0.975-3.714 2.469-4.773l0.018-0.012-1.462-2.451c-1.75 1.176-3.034 2.929-3.586 4.981l-0.014 0.061c0.635 0.513 1.037 1.291 1.037 2.163 0 0.004 0 0.008-0 0.011v-0.001c-0.002 0.875-0.404 1.656-1.032 2.169l-0.005 0.004c0.567 2.113 1.851 3.865 3.569 5.021l0.031 0.020 1.462-2.456c-1.51-1.047-2.487-2.771-2.487-4.724 0-0.005 0-0.011 0-0.016v0.001zM16 21.848c-0.001 0-0.003 0-0.005 0-0.892 0-1.738-0.2-2.493-0.559l0.035 0.015-1.391 2.493c1.121 0.568 2.445 0.901 3.846 0.901 0.83 0 1.633-0.117 2.393-0.335l-0.061 0.015c0.225-1.346 1.381-2.36 2.774-2.36 0.357 0 0.699 0.067 1.013 0.188l-0.019-0.007c1.48-1.449 2.441-3.421 2.585-5.616l0.001-0.026-2.855-0.041c-0.274 2.999-2.776 5.331-5.823 5.331h-0zM20.098 23.098c-0.602 0.353-1 0.996-1 1.732 0 1.105 0.896 2.001 2.001 2.001s2.001-0.896 2.001-2.001c0-0.369-0.1-0.715-0.274-1.012l0.005 0.009c-0.353-0.601-0.996-0.998-1.732-0.998-0.369 0-0.714 0.1-1.011 0.273l0.009-0.005zM16 1.004c8.282 0 14.996 6.714 14.996 14.996s-6.714 14.996-14.996 14.996c-8.282 0-14.996-6.714-14.996-14.996v0c0.004-8.28 6.715-14.992 14.995-14.996h0z"/></svg>`,
	},
	{
		id: "nixos",
		name: "NixOS",
		icon: `<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M7.352 1.592l-1.364.002L5.32 2.75l1.557 2.713-3.137-.008-1.32 2.34H14.11l-1.353-2.332-3.192-.006-2.214-3.865zm6.175 0l-2.687.025 5.846 10.127 1.341-2.34-1.59-2.765 2.24-3.85-.683-1.182h-1.336l-1.57 2.705-1.56-2.72zm6.887 4.195l-5.846 10.125 2.696-.008 1.601-2.76 4.453.016.682-1.183-.666-1.157-3.13-.008L21.778 8.1l-1.365-2.313zM9.432 8.086l-2.696.008-1.601 2.76-4.453-.016L0 12.02l.666 1.157 3.13.008-1.575 2.71 1.365 2.315L9.432 8.086zM7.33 12.25l-.006.01-.002-.004-1.342 2.34 1.59 2.765-2.24 3.85.684 1.182H7.35l.004-.006h.001l1.567-2.698 1.558 2.72 2.688-.026-.004-.006h.01L7.33 12.25zm2.55 3.93l1.354 2.332 3.192.006 2.215 3.865 1.363-.002.668-1.156-1.557-2.713 3.137.008 1.32-2.34H9.881Z"/></svg>`,
	},
	{
		id: "gentoo",
		name: "Gentoo",
		icon: `<svg viewBox="0 0 128 128" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M 54.878019,6.9788514 C 52.606309,6.9535784 50.349243,7.1298802 48.202612,7.5224513 27.557638,11.297954 13.03336,29.175728 11.80318,40.942955 c -0.603575,5.773536 2.501488,10.095232 4.218334,12.002691 4.63995,5.1551 13.884763,9.088063 19.830521,12.350577 -8.595713,7.329018 -12.534104,10.904523 -16.416711,14.981605 -5.809783,6.100788 -9.9028087,12.802819 -9.9152607,17.612633 -0.0038,1.549276 -0.254083,6.493739 1.7612617,10.393629 0.757878,1.46659 2.920173,6.35912 9.415149,10.02397 4.151245,2.34237 10.061522,3.21813 15.851371,2.39184 17.918792,-2.55727 41.931401,-17.76675 59.056672,-31.920162 10.914273,-9.020259 18.874243,-17.766235 21.178643,-22.070152 1.85931,-3.472614 2.07873,-9.702815 1.00022,-13.61174 C 114.71929,41.992425 89.810187,19.265055 69.446496,10.109986 64.983918,8.1037099 59.875796,7.0344423 54.878019,6.9788514 z m 3.479038,20.0044696 c 2.67668,-0.07916 5.808394,0.741961 9.175965,2.370094 8.02335,3.879065 16.268908,14.074868 -0.06525,19.939237 -4.441638,1.59466 -18.543969,-3.916534 -18.112744,-11.437338 0.412668,-7.290707 3.891987,-10.720867 9.002009,-10.871993 z"/></svg>`,
	},
	{
		id: "voidlinux",
		name: "Void Linux",
		icon: `<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="Voidlinux--Streamline-Simple-Icons" height="24" width="24"><desc>Voidlinux Streamline Icon: https://streamlinehq.com</desc><title>Void Linux</title><path d="M15.818 12a3.82 3.82 0 0 1 -3.82 3.82A3.82 3.82 0 0 1 8.178 12a3.82 3.82 0 0 1 3.82 -3.82 3.82 3.82 0 0 1 3.82 3.82Zm3.179 9.73 -2.726 -2.725A8.212 8.212 0 0 1 12 20.212 8.212 8.212 0 0 1 3.788 12a8.212 8.212 0 0 1 1.209 -4.269l-2.73 -2.73A12 12 0 0 0 0 12c0 6.627 5.373 12 12 12a12 12 0 0 0 6.997 -2.27zM12 0a12 12 0 0 0 -6.997 2.27L7.73 4.994A8.212 8.212 0 0 1 12 3.788 8.212 8.212 0 0 1 20.212 12a8.212 8.212 0 0 1 -1.209 4.269l2.73 2.73A12 12 0 0 0 24 12c0 -6.627 -5.373 -12 -12 -12Z" fill="currentColor" stroke-width="1"></path></svg>`,
	},
	{
		id: "alpinelinux",
		name: "Alpine Linux",
		icon: `<svg fill="currentColor" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg"><path d="M5.998 1.607 0 12l5.998 10.393h12.004L24 12 18.002 1.607H5.998zM9.965 7.12 L12.66 9.9l1.598 1.595.002-.002 2.41 2.363c-.2.14-.386.252-.563.344a3.756 3.756 0 0 1-.496.217 2.702 2.702 0 0 1-.425.111c-.131.023-.25.034-.358.034-.13 0-.242-.014-.338-.034a1.317 1.317 0 0 1-.24-.072.95.95 0 0 1-.2-.113l-1.062-1.092-3.039-3.041-1.1 1.053-3.07 3.072a.974.974 0 0 1-.2.111 1.274 1.274 0 0 1-.237.073 1.66 1.66 0 0 1-.338.033c-.108 0-.227-.009-.358-.031a2.7 2.7 0 0 1-.425-.114 3.748 3.748 0 0 1-.496-.217 5.228 5.228 0 0 1-.563-.343L9.965 7.12zm4.72.785 l4.579 4.598 1.382 1.353a5.24 5.24 0 0 1-.564.344 3.73 3.73 0 0 1-.494.217 2.697 2.697 0 0 1-.426.111c-.13.023-.251.034-.36.034-.129 0-.241-.014-.337-.034a1.285 1.285 0 0 1-.385-.146.239.239 0 0 1-.053-.04l-1.232-1.218-2.111-2.111-.334.334L12.79 9.8l1.896-1.897zm-5.966 4.12 v2.529a2.128 2.128 0 0 1-.356-.035 2.765 2.765 0 0 1-.422-.116 3.708 3.708 0 0 1-.488-.214 5.217 5.217 0 0 1-.555-.34l1.82-1.825z"/></svg>`,
	},
	{
		id: "opensuse",
		name: "openSUSE",
		icon: `<svg fill="currentColor" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M28.682 10.807c-0.349-0.010-0.693 0.115-0.948 0.354-0.849 0.802-0.313 2.234 0.854 2.286 0.729 0.026 1.339-0.547 1.365-1.271 0.026-0.729-0.542-1.339-1.271-1.37zM28.896 12.25c-0.323 0-0.583-0.172-0.583-0.385 0-0.219 0.26-0.391 0.583-0.391s0.589 0.172 0.589 0.391c0 0.214-0.266 0.385-0.589 0.385zM31.969 13.823c0.010-0.005 0.036-0.026 0.031-0.042-0.073-0.458-0.755-2.672-1.271-3.208-0.141-0.146-0.255-0.286-0.484-0.422-1.865-1.083-6.281-1.74-6.49-1.771 0 0-0.021-0.005-0.036 0.010-0.010 0.010-0.016 0.031-0.016 0.031l-0.016 1.021c-0.453-0.151-3.734-1.214-6.813-1.323-2.609-0.089-6.406-0.427-11.448 2.672l-0.146 0.094c-2.37 1.474-4.005 3.297-4.859 5.411-0.271 0.667-0.63 2.172-0.271 3.583 0.151 0.62 0.437 1.245 0.828 1.797 0.875 1.26 2.339 2.094 3.922 2.234 2.234 0.198 3.922-0.802 4.521-2.682 0.417-1.292 0-3.193-1.583-4.161-1.286-0.792-2.672-0.609-3.479-0.078-0.698 0.464-1.089 1.182-1.083 1.969 0.016 1.401 1.224 2.141 2.089 2.146 0.255 0 0.505-0.042 0.792-0.135 0.104-0.031 0.208-0.078 0.302-0.135l0.031-0.021 0.021-0.010h-0.005c0.255-0.172 0.37-0.484 0.286-0.781-0.099-0.354-0.453-0.573-0.813-0.5l-0.052 0.010-0.063 0.016-0.099 0.036c-0.198 0.047-0.349 0.052-0.38 0.052-0.099-0.005-0.599-0.156-0.599-0.703v-0.005c0-0.198 0.078-0.344 0.125-0.417 0.156-0.245 0.578-0.484 1.151-0.432 0.755 0.063 1.297 0.453 1.656 1.177 0.333 0.677 0.25 1.516-0.224 2.125-0.469 0.604-1.302 0.865-2.411 0.745s-2.083-0.781-2.594-1.771c-0.521-0.979-0.547-2.146-0.073-3.036 1.13-2.135 3.271-2.115 4.443-1.911 1.734 0.302 3.714 1.901 4.411 3.75 0.115 0.297 0.172 0.531 0.224 0.745l0.073 0.318 1.964 0.958c0.042 0.021 0.057 0.026 0.073 0.016 0.021-0.016 0.010-0.057 0.010-0.057-0.016-0.047-0.042-0.083-0.089-0.635-0.036-0.484-0.115-1.818 0.557-2.479 0.26-0.26 0.656-0.49 0.974-0.563 1.286-0.313 2.792-0.099 4.214 1.552 0.74 0.854 1.099 1.24 1.281 1.411 0 0 0.042 0.042 0.063 0.057 0.026 0.021 0.042 0.036 0.073 0.057 0.063 0.031 2.453 1.135 2.453 1.135s0.026 0.010 0.047-0.016c0.021-0.026 0-0.047 0-0.047-0.016-0.021-1.516-1.958-1.25-3.557 0.214-1.271 1.224-1.151 2.625-0.995 0.458 0.052 0.979 0.115 1.516 0.125 1.505 0.010 3.125-0.271 4.12-0.708 0.646-0.276 1.057-0.464 1.318-0.698 0.094-0.078 0.141-0.203 0.193-0.339l0.036-0.089c0.042-0.109 0.099-0.339 0.125-0.464 0.016-0.057 0.026-0.109-0.021-0.146-0.042-0.031-0.135 0.026-0.135 0.026-0.443 0.266-1.536 0.766-2.563 0.786-1.271 0.026-3.849-1.292-4.115-1.427-0.177-0.427-0.354-0.854-0.536-1.276 1.844 1.214 3.37 1.885 4.542 1.99 1.302 0.115 2.323-0.594 2.76-0.891 0.057-0.036 0.115-0.083 0.167-0.125zM26.74 12.078c0.021-0.505 0.229-0.974 0.599-1.318s0.854-0.526 1.359-0.505c1.042 0.036 1.859 0.911 1.823 1.953-0.016 0.505-0.229 0.974-0.599 1.318-0.37 0.349-0.849 0.526-1.359 0.51-1.042-0.042-1.854-0.917-1.823-1.958z"/></svg>`,
	},
	{
		id: "linuxmint",
		name: "Linux Mint",
		icon: `<svg fill="currentColor" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg"><path d="m 6.8654747,12.825017 0.433338,35.073638 13.0002713,0 0.460428,31.552734 C 20.990378,102.37947 44.337801,115.337 58.487376,115.17503 l 62.645034,-0.43333 0,-64.64925 C 120.95998,27.233712 98.768335,12.979755 81.210758,13.041688 L 6.8654747,12.825017 z m 31.1193883,19.229563 9.181439,0.02709 0.05413,44.282162 c 0.375631,10.247613 7.890889,11.105017 13.894037,10.806468 l 22.290044,0 C 91.682471,86.98173 96.144942,83.185776 96.133952,75.226307 L 95.971432,53.45086 c -0.21845,-5.940731 -10.668148,-5.283486 -10.562707,0.325007 l 0,20.96293 -8.775189,0 -0.08126,-21.09835 C 76.502686,48.810083 65.64737,46.823301 65.583294,54.452963 l 0.162503,20.448339 -9.34394,-0.02709 0.02712,-20.908764 c 0.02327,-4.817656 3.557859,-10.602447 8.93768,-13.054435 4.304613,-1.961908 10.031171,-2.257911 15.546155,2.92506 4.933194,-5.238304 13.266023,-5.294593 17.631613,-1.95004 2.781615,2.13112 6.503785,4.541596 6.608455,11.158564 l 0.32502,22.967139 C 105.5586,88.15129 98.432325,96.257123 87.819202,96.216313 L 57.75608,96.243433 C 44.322072,96.294279 37.818629,86.916531 38.03902,74.630491 L 37.98489,32.054615 z"/></svg>`,
	},
	{
		id: "manjaro",
		name: "Manjaro",
		icon: `<svg fill="currentColor" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M0 0v32h9v-23h11.5v-9zM11.5 11.5v20.5h9v-20.5zM23 0v32h9v-32z"/></svg>`,
	},
	{
		id: "endeavouros",
		name: "EndeavourOS",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M14.03 2.036v.002C13.303 2.138 0 18.46 0 18.46s.957.272 3.135.588c0 0 10.435-17.061 10.904-17.008c-.001 0-.01-.006-.01-.004zM3.135 19.048c-.95 1.562-1.71 2.818-1.71 2.818s10.218.46 18.165-.606c11.308-1.516-2.324-15.96-5.537-19.214c2.542 3.36 13.473 17.751 2.459 17.937c-3.89.066-13.377-.935-13.377-.935m10.906-17.01v.002c.022.01 0 .002 0-.002m-.037.797c-.055.073-.09.112-.156.205a61 61 0 0 0-1.285 1.9a357 357 0 0 0-3.723 5.842c-2.448 3.908-4.467 7.208-4.846 7.826c1.034.107 8.948.935 12.508.875c1.322-.022 2.274-.26 2.926-.623s1.022-.839 1.228-1.447c.413-1.217.063-3.047-.753-5.018c-1.537-3.711-4.485-7.686-5.899-9.56"/></svg>`,
	},
	{
		id: "garudalinux",
		name: "Garuda Linux",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 67.733332 67.733335" fill="currentColor"><path d="M 50.151616,9.6136678 C 43.058622,9.649481 36.122484,9.6196678 29.029672,9.5696215 19.571805,18.938014 10.233885,28.427112 0.85386714,37.873377 l -0.0595004,-4.6e-4 0.0300002,0.03 -0.0304002,0.0306 0.0604004,-4.8e-4 L 20.982149,58.09623 c 6.882366,0.05261 13.697232,0.04298 20.668466,0.0678 1.31714,-1.317156 2.634294,-2.6343 3.951445,-3.951446 l -0.008,3.7e-4 c 4.458715,-4.549324 8.993221,-8.968761 13.504369,-13.446368 l -37.882778,-0.0338 -4.200388,4.239788 c 11.827389,0.04279 21.480752,-0.04731 32.219811,0.0674 l -9.123989,9.17023 -17.524305,-0.007 -16.251127,-16.300256 24.35378,-24.41376 17.478544,0.0677 c 4.236588,4.252886 8.457664,8.521095 12.674523,12.793514 l -25.096134,-0.0353 -3.940616,3.898355 31.069584,0.0246 0.11007,6.532313 3.942616,-3.969186 0.0113,-6.441792 4.8e-4,-4.9e-4 -4.7e-4,-4.8e-4 z"/></svg>`,
	},
];

const desktopEnvironments = [
	{
		id: "plasma",
		name: "KDE Plasma",
		type: "de",
		icon: `<svg fill="currentColor" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg"><path d="M13.881 0 9.89.382v16.435l3.949-.594V9.216l5.308 7.772 4.162-1.317-5.436-7.475 5.479-7.05L19.105.17 13.84 7.22zM4.834 4.005a.203.203 0 0 0-.123.059L3.145 5.63a.203.203 0 0 0-.03.248L4.949 8.9a7.84 7.84 0 0 0-.772 1.759l-3.367.7a.203.203 0 0 0-.162.199v2.215c0 .093.064.174.155.196l3.268.8a7.83 7.83 0 0 0 .801 2.03L2.98 19.683a.203.203 0 0 0 .027.254l1.566 1.567a.204.204 0 0 0 .249.03l2.964-1.8c.582.336 1.21.6 1.874.78l.692 3.325c.02.094.102.161.198.161h2.215a.202.202 0 0 0 .197-.155l.815-3.332a7.807 7.807 0 0 0 1.927-.811l2.922 1.915c.08.053.186.042.254-.026l1.567-1.566a.202.202 0 0 0 .03-.248l-1.067-1.758-.345.11a.12.12 0 0 1-.135-.047L17.371 15.8a6.347 6.347 0 1 1-8.255-8.674V5.488c-.401.14-.79.31-1.159.511l-.001-.002-2.99-1.96a.203.203 0 0 0-.132-.033z"/></svg>`,
	},
	{
		id: "gnome",
		name: "GNOME",
		type: "de",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" fill="currentColor"><path d="M 99.18148,6.6446799 C 94.80815,6.92604 89.4102,8.6378533 84.806788,14.007323 c -6.005809,7.005029 -6.233702,21.018593 -4.382522,23.490337 2.303462,3.067768 5.13282,2.864419 9.992154,1.84066 4.85935,-1.023758 27.659,-22.007289 16.91656,-31.4665327 -0.40496,-0.3593666 -3.77818,-1.5084662 -8.1515,-1.2271074 z M 63.332424,11.465458 c -5.157366,0 -10.090329,6.219681 -8.677408,12.796975 1.370861,6.394982 3.257095,11.482217 7.099697,11.482217 3.579643,0 6.342381,-5.486922 7.713242,-12.008119 1.384872,-6.580802 -0.981681,-12.271073 -6.135531,-12.271073 z m -23.577995,9.290955 c -0.576668,-0.02923 -1.167052,-0.04162 -1.753009,0.08765 -4.687542,1.041287 -6.521195,7.253955 -3.944276,12.796973 2.503307,5.385247 5.181899,9.543388 8.677407,8.765051 3.253579,-0.72224 4.680537,-6.128524 4.64547,-12.18342 -0.0281,-5.344053 -3.588983,-9.261625 -7.625592,-9.466255 z M 23.539091,34.868145 c -0.975496,-0.05265 -1.8985,0.152498 -2.804824,0.613553 -3.625218,1.85118 -3.905706,7.306547 -0.613544,11.306916 3.197481,3.88467 6.328356,6.724547 9.027991,5.346682 2.524337,-1.283204 2.538361,-6.086452 1.227114,-11.043965 -0.99133,-3.757576 -3.910248,-6.065249 -6.836737,-6.223186 z m 50.048438,9.904507 c -3.816453,0.0071 -8.373478,0.385663 -13.848785,1.227108 -32.31499,4.964525 -34.797253,25.51331 -34.797253,34.972553 0,9.46275 13.350925,36.385477 36.112016,39.968627 22.761078,3.57614 31.946853,-14.87954 33.482493,-17.17949 1.53564,-2.29995 3.85663,-8.403936 0.78885,-11.21927 -3.06777,-2.811827 -15.605293,-0.82742 -18.932509,0.964156 -3.327204,1.791577 -1.805591,8.740504 -3.593667,11.043964 -1.791579,2.29644 -6.419521,3.26411 -10.255105,0.96416 -3.835597,-2.30696 -6.850774,-8.37238 -4.294886,-13.235231 2.559404,-4.859345 28.630171,-18.466209 33.745447,-23.577987 5.11528,-5.118789 1.8021,-14.549985 0.52591,-17.617753 0,0 -2.39452,-6.341504 -18.932511,-6.310837 z"/></svg>`,
	},
	{
		id: "xfce",
		name: "Xfce",
		type: "de",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" fill="currentColor"><path d="M 64,5.3747935 A 58.625209,58.625209 0 0 0 64,122.62521 58.625209,58.625209 0 0 0 64,5.3747935 Z M 86.311262,26.976624 c 2.143414,1.22491 -1.057598,15.041185 -0.463621,17.566173 1.899852,-4.972275 6.537608,-15.600343 8.976779,-14.877803 1.219169,3.39703 -1.773305,14.588613 -1.817136,18.292712 3.851943,-8.659376 8.473906,-17.150852 9.161916,-16.872303 4.78665,1.93794 -11.681957,29.090485 -12.895757,27.467077 -0.575951,-0.168463 0.823067,-14.55401 1.938484,-17.587951 -1.430085,3.2698 -6.012784,12.860507 -9.085679,14.866914 -1.795499,-3.362583 0.167131,-28.24477 4.185014,-28.854819 z m -36.333394,2.62147 c 2.67994,-0.0633 6.616348,1.4865 7.918855,12.060309 0.330501,2.272219 0.248555,8.667406 0.384276,10.968158 0.258786,1.990514 19.874916,-0.623203 39.065321,11.928068 2.2374,1.345821 11.74074,10.99666 2.47834,18.656765 -6.213047,5.152435 -33.176849,18.437316 -34.979878,19.703796 -4.726046,2.7718 -31.145153,2.37821 -40.022117,-9.384389 -8.803007,-12.34423 -5.943615,-24.281233 1.079703,-36.344285 -0.01586,-2.492208 -2.138507,-10.521383 -2.159406,-12.225217 -0.123455,-5.931053 5.438334,-8.853865 7.038292,-8.524045 1.670338,0.42637 4.317748,-0.0467 10.308515,14.614873 1.776278,2.747812 4.499805,3.846539 4.217686,1.222833 -3.304411,-10.249749 -5.638442,-21.184516 2.159404,-22.280146 0.337463,0.002 1.292852,-0.36796 2.511009,-0.39672 z m 26.024878,39.241124 c -4.297019,2.245054 -27.986526,9.143098 -26.994122,13.084 1.958961,1.502362 15.470124,-4.846135 18.028235,-5.275607 C 64.825449,80.432415 54.469397,87.012247 56.079588,88.981738 59.68375,88.791263 69.553377,83.386219 72.951886,81.912331 65.551163,87.603344 61.029671,94.105685 61.552777,94.632286 65.192146,98.295933 83.24346,74.870267 81.2768,74.379304 80.886369,73.898394 67.344931,81.217336 65.616442,83.167833 67.915207,80.77727 75.327106,72.529897 76.002746,68.839218 Z"/></svg>`,
	},
	{
		id: "lxqt",
		name: "LXQt",
		type: "de",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 350 350" fill="currentColor"><g transform="translate(-575.98291,-445.48535)"><path d="m 1116.8938,1689.4194 c -5.9501,-6.4533 -9.8718,-14.7504 -11.0814,-23.4444 -1.2096,-8.694 0.2983,-17.7464 4.2608,-25.5789 3.9625,-7.8325 10.362,-14.4102 18.0827,-18.5864 7.7206,-4.1761 16.7282,-5.9321 25.4522,-4.9618 14.0311,1.5606 27.0437,10.436 33.618,22.9295 l 79.0542,10.904 -90.1007,0 c -5.6213,-7.1952 -14.1129,-12.0817 -23.1583,-13.3266 -6.4597,-0.889 -13.1604,0.045 -19.131,2.6661 -5.9705,2.6213 -11.1929,6.9222 -14.9103,12.2794 -3.7173,5.3573 -5.9185,11.7546 -6.2844,18.265 -0.3659,6.5104 1.1045,13.1141 4.1982,18.8541"/><g transform="translate(15,2)"><path d="m 1113.0085,1717 -121.00003,-87 c -5.79688,11.4486 -8.0911,24.6415 -6.49942,37.3749 1.59169,12.7335 7.06282,24.9557 15.49945,34.6251 11.0648,12.6815 27.2298,20.7807 44.0118,22.0513 -7.9223,-2.5599 -15.1793,-7.1499 -20.8872,-13.2109 -5.7079,-6.0609 -9.8546,-13.5801 -11.935,-21.6416 -2.383,-9.2343 -2.0312,-19.1565 1,-28.1988 l 99.8104,56"/><path d="m 1106.2919,1740.501 -106.31654,-29.9171 c -0.85695,9.9442 1.09424,20.1153 5.57014,29.0365 4.476,8.9212 11.4632,16.5656 19.9473,21.8232 12.5858,7.7995 28.4343,10.1316 42.7334,6.2881 -14.3249,0.096 -28.5169,-7.0219 -37.0072,-18.5599 -4.7934,-6.514 -7.8065,-14.3248 -8.6296,-22.3704 l 83.7025,13.6996"/></g><path d="m 1169.7781,1675.729 c -1.9753,4.1002 -3.3486,8.4898 -4.0625,12.9847 -2.2142,13.9416 1.9287,28.0237 6.0575,41.5228 4.1289,13.499 8.3376,27.5466 6.255,41.5085 -1.5555,10.428 -6.6401,20.1889 -13.7567,27.9681 -7.1166,7.7792 -16.2003,13.6286 -25.9621,17.6121 -16.0797,6.5616 -34.1667,8.1034 -51.125,4.3581 l 0,46.4118 13.9455,-33.13 c 18.0735,4.1247 37.4229,2.4559 54.5233,-4.7024 12.2473,-5.1268 23.4211,-13.1088 31.4777,-23.6621 8.0567,-10.5533 12.8628,-23.7392 12.5223,-37.0119 -0.4093,-15.9555 -7.944,-30.7436 -15.2368,-44.9408 -7.2927,-14.1972 -14.6821,-29.0987 -14.7632,-45.0592 -0.01,-1.2875 0.035,-2.5753 0.125,-3.8597"/></g></svg>`,
	},
	{
		id: "cinnamon",
		name: "Cinnamon",
		type: "de",
		icon: `<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" id="svg8" xml:space="preserve" enable-background="new 0 0 23 23" viewBox="0 0 23 23" height="23px" width="23px" y="0px" x="0px" version="1.1" fill="currentColor"><metadata id="metadata14"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs id="defs12" /><path id="XMLID_9_" d="M 11.5 0 C 5.149 0 0 5.149 0 11.5 C 0 17.852 5.149 23 11.5 23 C 17.852 23 23 17.852 23 11.5 C 23 5.149 17.852 0 11.5 0 z M 11.5 1.9609375 C 16.769 1.9609375 21.039062 6.231 21.039062 11.5 C 21.039062 12.310396 20.928511 13.09242 20.738281 13.84375 L 16.201172 8.8007812 L 10.400391 15.400391 L 13.199219 9.8007812 L 11.800781 7.3007812 L 3.5546875 16.777344 C 2.5486997 15.265661 1.9609375 13.451673 1.9609375 11.5 C 1.9609375 6.231 6.231 1.9609375 11.5 1.9609375 z" style="fill:currentColor" /></svg>`,
	},
	{
		id: "mate",
		name: "MATE",
		type: "de",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96" fill="currentColor"><rect width="84" height="84" rx="6" ry="6" x="6" y="6" style="fill:currentColor"/><g transform="matrix(1.5869786,0,0,1.5869786,11.323738,8.0318058)" style="fill:#000000"><path d="M 3.033391,11.648109 24.671136,24.418378 3.016816,37.198431 3.033391,11.648109 z" style="fill:#000000;fill-rule:evenodd"/><path d="m 44.983184,24.545684 c 0,-11.316001 -9.170001,-20.5 -20.46875,-20.5 -6.524212,0 -12.313471,3.0771446 -16.0625,7.84375 l 2.5625,1.625 c 3.198502,-3.9147617 8.085497,-6.40625 13.53125,-6.40625 9.625499,-10e-8 17.4375,7.812 17.4375,17.4375 0,9.6255 -7.812,17.4375 -17.4375,17.4375 -5.430049,0 -10.301145,-2.47967 -13.5,-6.375 l -2.5625,1.625 c 3.749919,4.746873 9.522794,7.8125 16.03125,7.8125 11.29875,0 20.46875,-9.183999 20.46875,-20.5 z" style="fill:#000000"/><path d="m 37.045684,24.576934 c 0,-6.91725 -5.614001,-12.53125 -12.53125,-12.53125 -3.682751,0 -6.987847,1.592947 -9.28125,4.125 l 2.65625,1.65625 c 1.708502,-1.687387 4.044211,-2.71875 6.625,-2.71875 5.226749,0 9.46875,4.27 9.46875,9.53125 0,5.261251 -4.242001,9.53125 -9.46875,9.53125 -2.628895,10e-7 -5.002549,-1.069255 -6.71875,-2.8125 l -2.5625,1.625 c 2.293403,2.532054 5.598499,4.125001 9.28125,4.125 6.91725,0 12.53125,-5.614 12.53125,-12.53125 z" style="fill:#000000"/></g></svg>`,
	},
	{
		id: "budgie",
		name: "Budgie",
		type: "de",
		icon: `<svg viewBox="0 0 175.152 175.152" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M83.93 0h8.24c19.48 1.197 38.596 8.758 53.206 21.769 17.909 15.522 28.82 38.623 29.776 62.277v8.123c-1.197 19.446-8.73 38.525-21.706 53.127-15.388 17.82-38.257 28.677-61.732 29.856h-8.016c-19.928-.974-39.499-8.775-54.351-22.144C11.814 137.611 1.144 114.921 0 91.651V83.69c1.081-23.333 11.77-46.103 29.347-61.536C44.253 8.731 63.922.903 83.93 0Z" style="fill:currentColor"/><path d="M86.146 52.161c7.587-5.486 17.48-6.443 26.55-5.594 9.634 1.082 19.419 4.808 25.925 12.252 4.414 4.844 6.693 11.215 7.587 17.622.321 2.413.634 4.835.786 7.266.786 12.788-3.914 25.486-11.689 35.522-8.445 8.972-19.678 15.165-31.59 18.158-17.417 4.343-36.63 1.68-51.902-7.873-9.642-6.005-17.542-14.932-21.867-25.477-3.807-10.322-3.763-21.635-1.743-32.332 1.69 6.48 6.658 12.029 13.092 14.021 5.916 1.86 13.261 1.198 17.658-3.565 9.973-9.178 15.97-22.118 27.193-30z" style="fill:#fff"/><path d="M115.887 68.363c1.644-3.432 6.183-3.566 8.918-1.376-.563.17-1.689.518-2.252.697.045.67.116 2.02.16 2.69 1.216.125 2.414-.125 3.575-.483-.25 2.52-1.197 5.416-3.985 6.068-4.361 1.689-8.704-3.566-6.416-7.596z" style="fill:currentColor"/><path d="M146.208 76.441c2.797.966 5.612 1.877 8.418 2.798-2.565 1.456-5.121 2.922-7.632 4.468-.152-2.431-.465-4.853-.786-7.266zM68.533 89.917c1.859-3.306 5.362-5.335 9.061-5.853 6.828-.75 13.503 5.55 12.583 12.466-1.198 4.37-3.977 8.883-8.615 10.107-11.832 2.708-23.547-1.617-34.843-4.71 8.32-1.17 17.301-4.431 21.814-12.01z" style="fill:currentColor"/><circle style="fill:currentColor;stroke:currentColor;stroke-width:.71490747" cx="120.85" cy="70.899" r="5.264"/><ellipse style="fill:#fff;stroke:#fff;stroke-width:.71490747" cx="123.72" cy="68.422" rx="1.542" ry="1.509"/></svg>`,
	},
	{
		id: "i3",
		name: "i3",
		type: "wm",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 115" fill="currentColor"><path d="M68 18c-3 3-3 8 0 11l30 31c4 5 3 10 2 15-2 8-6 14-15 20-6 5-16 9-24 10-8 2-12 1-17-4-8-8-16-16-21-21-3-3-5-5-7-7-1-1-2-2-2-2-1-1-2-1-3-1-1-1-3-1-5 2-2 2-2 4-2 7 0 2 1 4 3 5 0 0 1 1 2 2 2 2 5 5 8 8 7 7 17 17 27 27 9 9 22 10 33 7 11-3 22-11 31-20 9-9 16-20 19-31 3-11 2-24-7-33-20-21-30-31-30-31-2-2-4-3-6-3-2 0-4 1-6 3z"/><path d="M34 83c-3 3-3 8 0 11l21 21c2 2 5 3 8 2 3-1 5-3 6-6 1-3 0-6-2-8l-21-21c-2-2-4-3-6-3-2 0-4 1-6 3z"/><circle cx="24" cy="27" r="4" fill="currentColor"/><circle cx="60" cy="10" r="4" fill="currentColor"/><circle cx="82" cy="47" r="4" fill="currentColor"/></svg>`,
	},
	{
		id: "hyprland",
		name: "Hyprland",
		type: "wm",
		default: true,
		icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 330 241.24 312.89" fill="currentColor"><path d="M107 330c-25.9 39.39-61.43 86.28-79.3 114.97C9.83 473.67-1.86 502.32.24 536.26c3.85 62.1 56.46 106.63 120.38 106.63v-27.4c-51.66 0-90.07-33.06-93.03-80.93-1.67-26.96 6.9-48.66 23.37-75.1 14.07-22.6 33.9-47.95 56.03-80.2zm27.25 0c25.89 39.39 61.42 86.28 79.29 114.97 17.87 28.7 29.56 57.35 27.46 91.29-3.85 62.1-56.46 106.63-120.38 106.63v-27.4c51.66 0 90.07-33.06 93.03-80.93 1.67-26.96-6.9-48.66-23.37-75.1-14.07-22.6-33.9-47.95-56.03-80.2z"/></svg>`,
	},
	{
		id: "dwm",
		name: "DWM",
		type: "wm",
		icon: `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M0 11h6V7h2v8h2v-4h2v4h2v-4h10v6h-2v-4h-2v4h-2v-4h-2v4H2v-2h4v-2H2v4H0z"/></svg>`,
	},
	{
		id: "openbox",
		name: "Openbox",
		type: "wm",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500" fill="currentColor"><g><path d="M498.008,133.479L333.984,38.211c-1.244-0.728-2.772-0.728-4.016,0l-81.976,47.608c-1.908,1.108-2.56,3.552-1.448,5.464c1.108,1.916,3.552,2.552,5.464,1.448l79.968-46.44l156.08,90.656l-74.024,43.276L269.748,96.147c-1.912-1.104-4.36-0.468-5.472,1.44c-1.112,1.908-0.468,4.36,1.44,5.472l146.304,85.248c0.624,0.364,1.32,0.544,2.016,0.544c0.7,0,1.392-0.184,2.02-0.544l81.964-47.92c1.228-0.716,1.984-2.036,1.98-3.456C499.996,135.507,499.24,134.195,498.008,133.479z"/></g><g><path d="M252.008,85.815l-81.976-47.608c-1.244-0.728-2.772-0.728-4.016,0L1.992,133.475c-1.232,0.712-1.988,2.028-1.992,3.452c-0.004,1.42,0.752,2.736,1.98,3.456l81.96,47.92c0.636,0.372,1.328,0.548,2.016,0.548c1.376,0,2.716-0.708,3.456-1.98c1.116-1.904,0.476-4.36-1.432-5.472l-76.036-44.46l156.08-90.656l74.024,42.996l-138.196,80.528c-1.904,1.112-2.548,3.56-1.44,5.472c1.116,1.908,3.556,2.548,5.472,1.44l144.132-83.996c1.232-0.716,1.984-2.036,1.984-3.46C254,87.843,253.244,86.527,252.008,85.815z"/></g><g><path d="M250,277.191c-2.212,0-4,1.788-4,4v170.212L90.252,361.275v-80.084c0-2.212-1.788-4-4-4c-2.212,0-4,1.788-4,4v82.392c0,1.424,0.76,2.744,1.996,3.46l163.748,94.756c0.62,0.36,1.312,0.54,2.004,0.54s1.38-0.18,2-0.536c1.24-0.712,2-2.036,2-3.464V281.191C254,278.979,252.212,277.191,250,277.191z"/></g><g><path d="M413.752,277.191c-2.212,0-4,1.788-4,4v79.588L254,451.387V281.191c0-2.212-1.788-4-4-4c-2.212,0-4,1.788-4,4v177.148c0,1.428,0.764,2.752,2.004,3.468c0.62,0.356,1.308,0.532,1.996,0.532c0.696,0,1.392-0.18,2.012-0.544l163.752-95.26c1.232-0.712,1.988-2.032,1.988-3.456v-81.888C417.752,278.979,415.964,277.191,413.752,277.191z"/></g><g><path d="M253.452,278.103c-1.108-1.904-3.556-2.548-5.472-1.432l-79.952,46.744L11.952,232.467l74.024-42.992l140.168,81.412c1.908,1.112,4.356,0.464,5.464-1.448c1.116-1.908,0.464-4.356-1.448-5.464l-142.176-82.58c-1.244-0.728-2.772-0.728-4.016,0L1.992,229.007C0.756,229.719,0,231.039,0,232.459c0,1.428,0.752,2.744,1.984,3.46l164.032,95.588c0.624,0.364,1.32,0.544,2.016,0.544c0.7,0,1.392-0.184,2.02-0.556l81.968-47.92C253.924,282.463,254.564,280.011,253.452,278.103z"/></g><g><path d="M498.008,229.015l-81.976-47.612c-1.908-1.108-4.356-0.464-5.464,1.448c-1.116,1.908-0.464,4.356,1.448,5.464l76.032,44.16l-156.076,90.948l-79.952-46.744c-1.912-1.12-4.364-0.48-5.472,1.432c-1.116,1.904-0.476,4.36,1.432,5.472l81.968,47.92c0.624,0.364,1.32,0.548,2.02,0.548c0.696,0,1.392-0.18,2.016-0.544l164.032-95.58c1.232-0.716,1.984-2.036,1.984-3.46C500,231.047,499.244,229.731,498.008,229.015z"/></g><g><path d="M398.968,193.591c-1.112-1.916-3.568-2.556-5.464-1.448l-145.512,84.528c-1.908,1.108-2.56,3.552-1.448,5.464c0.74,1.28,2.08,1.992,3.46,1.992c0.684,0,1.376-0.176,2.004-0.544l145.512-84.528C399.428,197.947,400.08,195.503,398.968,193.591z"/></g><g><path d="M250,86.047c-2.212,0-4,1.788-4,4v171.648c0,2.212,1.788,4,4,4c2.212,0,4-1.788,4-4V90.047C254,87.835,252.212,86.047,250,86.047z"/></g></svg>`,
	},
	{
		id: "awesomewm",
		name: "AwesomeWM",
		type: "wm",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M0 24V8.25h16.5V7.5H0V0h24v24h-7.5v-8.25h-9v.75h8.25V24z"/></svg>`,
	},
	{
		id: "xmonad",
		name: "Xmonad",
		type: "wm",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47 73" fill="currentColor"><path d="M 22.62043,20.307707 L 36.04778,0.32867349 L 43.859402,0.32867349 L 26.580238,26.139425 L 22.080456,31.215179 L 6.8531925,54.074074 L -0.9944279,54.074074 L 18.192644,25.383462 M 1.4534537,0.32867349 L 9.2650758,0.32867349 L 45.011347,54.074074 L 37.199725,54.074074 L 22.080456,31.215179 L 6.8531925,54.074074 L -0.9944279,54.074074 L 18.192644,25.383462 L 1.4534537,0.32867349"/></svg>`,
	},
	{
		id: "sway",
		name: "Sway",
		type: "wm",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" fill="currentColor"><g transform="matrix(.303287 0 0 .303287 -3.636241 69.792788)"><path d="M117.5-69.5l113.1-10.1v17.3L117.5-19.1 4.3-62.3v-17.3z"/><path d="M117.5-36.5L4.3-79.6l8.9-3.4c6.7-2.5 13.8-4.6 20.3-7.4 13.5-6 28.3-9.8 43.1-10 8.5-.1 16.4 2.5 24.7 1.2 9.6-1.6 18.8-5.2 28.4-7.1 17.4-3.3 34.3 1.2 50.4 7.6l49.2 18.6c.5.2.9.3 1.4.5z"/><g><path d="M41.4-77.4c-1.4-31.4 30.4-48.3 53.9-61.2 20.5-11.2 46.1-25.8 40.8-53.1-1.1-5.7-9.8-3.3-8.7 2.4 2.4 12.5-4.7 22-14.2 29.2-11.2 8.5-24.1 14.5-36.3 21.4-22.5 12.8-45.8 33-44.6 61.3.3 5.8 9.3 5.8 9.1 0z"/><path d="M80.8-128.9c31.2 6.5 64.1-2.8 87.2-24.8 4.2-4-2.2-10.4-6.4-6.4-20.6 19.8-50.4 28.4-78.4 22.5-5.6-1.1-8.1 7.5-2.4 8.7z"/></g><g><path d="M80.8-194.4c8.2 2 22.1-7.5 28.3-10.5 8-3.9 16.3-6.9 24.4-10.5 3.1-1.4 13.2-4.6 13.3-9.1.2-5.6-10.5-5.9-14-5.5-7.1.7-14 2.9-20.8 4.9a108.63 108.63 0 0 0-20.3 8.4c-4.9 2.6-11.6 7.2-14.5 12-1.8 2.9-1.7 7.2 1.1 9.2.7.5 1.5.9 2.5 1.1zm50.2-15.2l4.2-2.2c11.6-5.5 25-10 38.2-11 11.5-.9 24.2-3 35.6.1 5.9 1.6 12.4 7.3 9.3 12.8-2.3 4.1-11.7 9.6-15.8 12.6-15.1 10.7-36.2 15.4-55.5 16.4-14 .8-37-7.2-24.2-22.3 2.1-2.6 5.1-4.6 8.2-6.4z"/><path d="M208-197c3.2.1 6.9.9 8.4 3.8 1.2 2.4.3 5.3-1.4 7.3-1.8 2-4.2 3.1-6.7 4.1-12.4 5.2-25.7 8.3-39.1 9.2-3.7.2-7.6.3-11.2-.9s-6.8-3.9-7.8-7.5c-2.2-8.3 16-11 20.9-11.9s9.8-1.5 14.7-1.7c7.4-.5 14.6-2.7 22.2-2.4zm-1.7 54.4c-4.9-12.1-34.4 1.2-41.1 5.5-2.5 1.6-5.1 4-4.6 6.9.5 3.1 4.2 4.5 7.4 4.9 7.7 1 44-3 38.3-17.3zm-92.7-39.2c-1.2 8-12 16.8-19.2 19.3-7 2.5-18.7-2.7-14.4-11.2 3.8-7.4 22.6-20.6 30.8-15.2 2.4 1.5 3.2 4.5 2.8 7.1zm20.8 39.8c11.5 1.4 23.3-.1 34.1-4.2 2.4-.9 4.9-2.1 5.9-4.5.7-1.8.2-4-1.2-5.3s-3.6-1.7-5.3-.9c-3.2-3.5-8.8-3.2-13.5-2.3-7.4 1.5-14.7 4.2-21.4 7.7-2.4 1.3-5.1 3.5-4.4 6.1.7 2.3 3.4 3.1 5.8 3.4z"/><path d="M147.7-151.3c15.2 3.4 31.9-1 44.9-9.4 1.7-1.1 3.6-2.8 3.3-4.9-.4-2.5-3.6-3.3-6.2-3.2-14.8.2-29.8 3.9-42.7 11.4-1.5.8-3.1 2.2-2.7 3.8.5 1.4 2.1 2 3.4 2.3zm-76.1-20.2c1.4-1.7 2.6-3.8 2-5.8-2.8-11.1-17.9 3.3-21.5 6.6-4.6 4.2-4.4 7.9 3.1 7.9 6.1-.1 12.6-4.2 16.4-8.7z"/></g></g></svg>`,
	},
];

const shells = [
	{
		id: "bash",
		name: "Bash",
		default: true,
		icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line></svg>`,
	},
	{
		id: "zsh",
		name: "Zsh",
		icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line></svg>`,
	},
	{
		id: "fish",
		name: "Fish",
		icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line></svg>`,
	},
	{
		id: "ksh",
		name: "Ksh",
		icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line></svg>`,
	},
];

const terminals = [
	{
		id: "kitty",
		name: "Kitty",
		icon: `<svg xmlns="http://www.w3.org/2000/svg" width="256" height="256" viewBox="0 0 240 240" fill="currentColor"><g transform="translate(0 -812.362)"><rect width="100.446" height="161.551" x="72.824" y="850.13" ry="0" style="fill:currentColor;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:5.86876726;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"/><path d="M67.896 1029.71h104.208a7.065 7.065 0 0 0 7.065-7.066V918.436a7.065 7.065 0 0 0-7.065-7.065H67.896a7.065 7.065 0 0 0-7.065 7.065v104.208a7.065 7.065 0 0 0 7.065 7.065m55.813-38.35h37.444a4.239 4.239 0 0 1 0 8.479H123.71a4.239 4.239 0 0 1 0-8.478m-45.032-45.71a4.239 4.239 0 0 1 5.991-5.99l26.48 26.464a4.24 4.24 0 0 1 0 5.992l-26.48 26.48a4.239 4.239 0 0 1-5.991-5.992l23.484-23.484z" style="stroke-width:1.41299629;fill:currentColor"/><path d="M96.085 898.143c1.881 0 3.386-3.574 3.386-8.17 0-4.595-1.505-8.169-3.386-8.169-1.88 0-3.385 3.574-3.385 8.17 0 4.595 1.504 8.17 3.385 8.17" style="clip-rule:evenodd;fill:currentColor;fill-opacity:1;fill-rule:evenodd;stroke-width:3.09913683"/></g></svg>`,
	},
	{
		id: "alacritty",
		name: "Alacritty",
		icon: `<svg fill="currentColor" width="800px" height="800px" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg"><path d="m10.065 0-8.57 21.269H5.09L12 5.025l6.91 16.244h3.594L13.934 0zM12 9.935 L9.702 15.5c1.475 4.54 1.475 4.54 2.298 8.5.823-3.96.823-3.96 2.297-8.5L12 9.935z"/></svg>`,
	},
	{
		id: "wezterm",
		name: "WezTerm",
		icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L3 9v10l9 3 9-3V9l-9-7z"/><path d="M8 11l3 2-3 2M16 11l-3 2 3 2" stroke-width="1"/></svg>`,
	},
	{
		id: "foot",
		name: "Foot",
		default: true,
		icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M8 10l3 3-3 3M16 10l-3 3 3 3" stroke-width="1"/></svg>`,
	},
	{
		id: "gnometerminal",
		name: "GNOME Terminal",
		icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="1"/><circle cx="8" cy="8" r="0.5" fill="currentColor"/><circle cx="12" cy="8" r="0.5" fill="currentColor"/><circle cx="16" cy="8" r="0.5" fill="currentColor"/><path d="M8 13l2.5 2-2.5 2" stroke-width="1"/></svg>`,
	},
	{
		id: "konsole",
		name: "Konsole",
		icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="1"/><circle cx="8" cy="8" r="0.6" fill="currentColor"/><circle cx="13" cy="8" r="0.6" fill="currentColor"/><circle cx="18" cy="8" r="0.6" fill="currentColor"/></svg>`,
	},
	{
		id: "xterm",
		name: "Xterm",
		icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="1"/><text x="12" y="15" text-anchor="middle" font-size="10" fill="currentColor">X</text></svg>`,
	},
	{
		id: "urxvt",
		name: "Urxvt",
		icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="1"/><path d="M8 13l3-3-3-3M16 13l-3-3 3-3" stroke-width="1"/></svg>`,
	},
	{
		id: "st",
		name: "St",
		icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="1"/><path d="M7 10l3 3-3 3M17 10l-3 3 3 3" stroke-width="1"/></svg>`,
	},
];

// SVG icons for special items
const kernel = `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M14.62,8.35c-.42.28-1.75,1-1.95,1.19a.82.82,0,0,1-1.14,0c-.2-.16-1.53-.92-1.95-1.19s-.45-.7.08-.92a6.16,6.16,0,0,1,4.91,0c.49.21.51.6,0,.9m7.22,7.28A19.09,19.09,0,0,0,18,10a4.31,4.31,0,0,1-1.06-1.88c-.1-.33-.17-.67-.24-1A11.32,11.32,0,0,0,16,4.47,4.06,4.06,0,0,0,12.16,2,4.2,4.2,0,0,0,8.21,4.4a5.9,5.9,0,0,0-.46,1.34c-.17.76-.32,1.55-.5,2.32a3.38,3.38,0,0,1-1,1.71,19.53,19.53,0,0,0-3.88,5.35A6.09,6.09,0,0,0,2,16c-.19.66.29,1.12,1,1,.44-.09.88-.18,1.3-.31s.57,0,.67.35a6.73,6.73,0,0,0,4.24,4.5c4.12,1.56,8.93-.66,10-4.58.07-.27.17-.37.47-.27.46.14.93.24,1.4.35a.72.72,0,0,0,.92-.64,1.44,1.44,0,0,0-.16-.73"/></svg>`;
const verified = `<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.6563 5.24291C15.4743 5.88358 16 6.8804 16 8C16 9.11964 15.4743 10.1165 14.6562 10.7572C14.7816 11.7886 14.4485 12.8652 13.6568 13.6569C12.8651 14.4486 11.7885 14.7817 10.7571 14.6563C10.1164 15.4743 9.1196 16 8 16C6.88038 16 5.88354 15.4743 5.24288 14.6562C4.21141 14.7817 3.13481 14.4485 2.34312 13.6568C1.55143 12.8652 1.2183 11.7886 1.34372 10.7571C0.525698 10.1164 0 9.1196 0 8C0 6.88038 0.525715 5.88354 1.34376 5.24288C1.21834 4.21141 1.55147 3.13481 2.34316 2.34312C3.13485 1.55143 4.21145 1.2183 5.24291 1.34372C5.88358 0.525698 6.8804 0 8 0C9.11964 0 10.1165 0.525732 10.7572 1.3438C11.7886 1.21838 12.8652 1.55152 13.6569 2.3432C14.4486 3.13488 14.7817 4.21146 14.6563 5.24291ZM12.2071 6.20711L10.7929 4.79289L7 8.58579L5.20711 6.79289L3.79289 8.20711L7 11.4142L12.2071 6.20711Z" fill="currentColor"/></svg>`;

// ============================================================================
// HELPER FUNCTIONS
// ============================================================================

function getItemById(array, id) {
	return array.find((item) => item.id === id);
}

function getItemName(array, id) {
	const item = getItemById(array, id);
	return item ? item.name : "Unknown";
}

function getItemIcon(array, id) {
	const item = getItemById(array, id);
	return item
		? item.icon
		: `<svg viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10"/></svg>`;
}

function getIcon(category, value) {
	switch (category) {
		case "distro":
			return getItemIcon(distros, value);
		case "de":
			return getItemIcon(desktopEnvironments, value);
		case "shell":
			return getItemIcon(shells, value);
		case "terminal":
			return getItemIcon(terminals, value);
		case "kernel":
			return kernel;
		case "verified":
			return verified;
		default:
			return `<svg viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10"/></svg>`;
	}
}

function renderDetail(label, value, iconSvg) {
	if (!value) {
		return "";
	}
	return `
    <div class="detail-item">
      <div class="detail-icon">${iconSvg}</div>
      <div class="detail-content">
        <div class="detail-label">${label}</div>
        <div class="detail-value">${value}</div>
      </div>
    </div>
  `;
}

let lastFetchedUsername = null;

function getAvatarFromCache(username) {
	try {
		const cached = localStorage.getItem(`avatar_${username}`);
		return cached ? JSON.parse(cached) : null;
	} catch (_e) {
		return null;
	}
}

function setAvatarCache(username, data) {
	try {
		localStorage.setItem(`avatar_${username}`, JSON.stringify(data));
	} catch (_e) {
		// Silently fail if localStorage is full
	}
}

function displayAvatar(base64Data) {
	DOM.avatarImg.src = base64Data;
	DOM.avatarImg.style.display = "block";
	DOM.avatarFallback.classList.add("hidden");
}

function displayAvatarFallback() {
	DOM.avatarImg.style.display = "none";
	DOM.avatarFallback.classList.remove("hidden");
}

function updateAvatar(username) {
	// Only process if username exists
	if (!username?.trim()) {
		lastFetchedUsername = null;
		displayAvatarFallback();
		return;
	}

	// Skip if we already processed this username
	if (lastFetchedUsername === username.trim()) {
		return;
	}

	lastFetchedUsername = username.trim();

	// Check cache first
	const cached = getAvatarFromCache(username.trim());
	if (cached) {
		displayAvatar(cached);
		return;
	}

	// Fetch avatar from unavatar.io (aggregates from multiple sources)
	const avatarUrl = `https://unavatar.io/${username.trim()}`;

	fetch(avatarUrl)
		.then((response) => response.blob())
		.then((blob) => {
			const reader = new FileReader();
			reader.onload = () => {
				setAvatarCache(username.trim(), reader.result);
				displayAvatar(reader.result);
			};
			reader.readAsDataURL(blob);
		})
		.catch(() => {
			displayAvatarFallback();
		});
}

// Debounce function to limit update calls
function debounce(func, delay) {
	let timeoutId;
	return (...args) => {
		clearTimeout(timeoutId);
		timeoutId = setTimeout(() => func(...args), delay);
	};
}

// Input validation constants
const MAX_LENGTHS = {
	name: 100,
	username: 50,
	kernel: 100,
};

// Color constants
const ACCENT_COLORS = {
	blue: "#1d9bf0",
	red: "#e74c3c",
	green: "#00ba7c",
	purple: "#7856ff",
	orange: "#ff7a00",
	pink: "#f91880",
};

const THEME_BACKGROUNDS = {
	light: "#ffffff",
	dim: "#15202b",
	"lights-out": "#000000",
};

// DOM element cache
const DOM = {
	name: null,
	username: null,
	verified: null,
	currentDistro: null,
	graphicalEnv: null,
	shell: null,
	terminal: null,
	kernel: null,
	profileName: null,
	profileHandle: null,
	profileNameRow: null,
	profileSection: null,
	detailsContainer: null,
	avatarImg: null,
	avatarFallback: null,
	verifiedIcon: null,
	copyBtn: null,
	downloadBtn: null,
	copyBtnText: null,

	init() {
		this.name = document.getElementById("name");
		this.username = document.getElementById("username");
		this.verified = document.getElementById("verified");
		this.currentDistro = document.getElementById("currentDistro");
		this.graphicalEnv = document.getElementById("graphicalEnv");
		this.shell = document.getElementById("shell");
		this.terminal = document.getElementById("terminal");
		this.kernel = document.getElementById("kernel");
		this.profileName = document.getElementById("profileName");
		this.profileHandle = document.getElementById("profileHandle");
		this.profileNameRow = document.querySelector(".profile-name-row");
		this.profileSection = document.querySelector(".profile-section");
		this.detailsContainer = document.getElementById("detailsContainer");
		this.avatarImg = document.getElementById("avatarImg");
		this.avatarFallback = document.getElementById("avatarFallback");
		this.verifiedIcon = document.getElementById("verifiedIcon");
		this.copyBtn = document.getElementById("copyBtn");
		this.downloadBtn = document.getElementById("downloadBtn");
		this.copyBtnText = document.getElementById("copyBtnText");
	},
};

function validateInput(id, maxLength) {
	const element = document.getElementById(id);
	if (element && element.value.length > maxLength) {
		element.value = element.value.substring(0, maxLength);
	}
}

function saveToStorage(data) {
	localStorage.setItem("cardBuilderData", JSON.stringify(data));
}

function loadFromStorage() {
	const saved = localStorage.getItem("cardBuilderData");
	if (saved) {
		try {
			return JSON.parse(saved);
		} catch (_e) {
			return null;
		}
	}
	return null;
}

function buildDetailsHtml(currentDistro, graphicalEnv, shell, terminal, kernel) {
	let detailsHtml = "";

	if (currentDistro && currentDistro !== "none") {
		const distroName = getItemName(distros, currentDistro);
		detailsHtml += renderDetail("Operating System", distroName, getIcon("distro", currentDistro));
	}

	if (graphicalEnv && graphicalEnv !== "none") {
		const env = getItemById(desktopEnvironments, graphicalEnv);
		const label = env?.type === "wm" ? "Window Manager" : "Desktop Environment";
		const envName = getItemName(desktopEnvironments, graphicalEnv);
		detailsHtml += renderDetail(label, envName, getIcon("de", graphicalEnv));
	}

	if (shell && shell !== "none") {
		const shellName = getItemName(shells, shell);
		detailsHtml += renderDetail("Shell", shellName, getIcon("shell", shell));
	}

	if (terminal && terminal !== "none") {
		const terminalName = getItemName(terminals, terminal);
		detailsHtml += renderDetail("Terminal", terminalName, getIcon("terminal", terminal));
	}

	if (kernel) {
		detailsHtml += renderDetail("Kernel", kernel, getIcon("kernel"));
	}

	return detailsHtml;
}

function updateProfileVisibility(name, username) {
	if (name) {
		DOM.profileNameRow.classList.remove("hidden");
	} else {
		DOM.profileNameRow.classList.add("hidden");
	}

	if (username) {
		DOM.profileHandle.classList.remove("hidden");
	} else {
		DOM.profileHandle.classList.add("hidden");
	}
}

function updateVerifiedIcon(verified) {
	if (verified) {
		DOM.verifiedIcon.innerHTML = `<svg viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M20.396 11c-.018-.646-.215-1.275-.57-1.816-.354-.54-.852-.972-1.438-1.246.223-.607.27-1.264.14-1.897-.131-.634-.437-1.218-.882-1.687-.47-.445-1.053-.75-1.687-.882-.633-.13-1.29-.083-1.897.14-.273-.587-.704-1.086-1.245-1.44S11.647 1.62 11 1.604c-.646.017-1.273.213-1.813.568s-.969.854-1.24 1.44c-.608-.223-1.267-.272-1.902-.14-.635.13-1.22.436-1.69.882-.445.47-.749 1.055-.878 1.688-.13.633-.08 1.29.144 1.896-.587.274-1.087.705-1.443 1.245-.356.54-.555 1.17-.574 1.817.02.647.218 1.276.574 1.817.356.54.856.972 1.443 1.245-.224.606-.274 1.263-.144 1.896.13.634.433 1.218.877 1.688.47.443 1.054.747 1.687.878.633.132 1.29.084 1.897-.136.274.586.705 1.084 1.246 1.439.54.354 1.17.551 1.816.569.647-.016 1.276-.213 1.817-.567s.972-.854 1.245-1.44c.604.239 1.266.296 1.903.164.636-.132 1.22-.447 1.68-.907.46-.46.776-1.044.908-1.681s.075-1.299-.165-1.903c.586-.274 1.084-.705 1.439-1.246.354-.54.551-1.17.569-1.816zM9.662 14.85l-3.429-3.428 1.293-1.302 2.072 2.072 4.4-4.794 1.347 1.246z" fill="currentColor"></path></svg>`;
		DOM.verifiedIcon.classList.remove("hidden");
	} else {
		DOM.verifiedIcon.innerHTML = "";
		DOM.verifiedIcon.classList.add("hidden");
	}
}

function update() {
	const name = DOM.name.value;
	const username = DOM.username.value;
	const verified = DOM.verified.checked;
	const currentDistro = DOM.currentDistro.value;
	const graphicalEnv = DOM.graphicalEnv.value;
	const shell = DOM.shell.value;
	const terminal = DOM.terminal.value;
	const kernel = DOM.kernel.value;

	// Save to localStorage
	saveToStorage({ name, username, verified, currentDistro, graphicalEnv, shell, terminal, kernel });

	// Update profile
	DOM.profileName.innerText = name;
	DOM.profileHandle.innerText = `@${username.replace(/\s+/g, "_")}`;

	updateProfileVisibility(name, username);
	updateAvatar(username);
	updateVerifiedIcon(verified);

	// Build and update details
	const detailsHtml = buildDetailsHtml(currentDistro, graphicalEnv, shell, terminal, kernel);
	DOM.detailsContainer.innerHTML = detailsHtml;
}

// ============================================================================
// POPULATE SELECT OPTIONS FROM CONSTANTS
// ============================================================================

function getDefaultValue(dataArray) {
	const defaultItem = dataArray.find((item) => item.default === true);
	return defaultItem ? defaultItem.id : null;
}

function populateSelect(selectId, dataArray, includeNone = true) {
	const selectElement = document.getElementById(selectId);
	if (!selectElement) {
		return;
	}

	// Clear existing options
	selectElement.innerHTML = "";

	// Add options from dataArray
	for (const item of dataArray) {
		const option = document.createElement("option");
		option.value = item.id;
		option.textContent = item.name;
		selectElement.appendChild(option);
	}

	// Add "None" option at the end if requested
	if (includeNone) {
		const noneOption = document.createElement("option");
		noneOption.value = "none";
		noneOption.textContent = "None";
		selectElement.appendChild(noneOption);
	}

	// Set default value if it exists
	const defaultValue = getDefaultValue(dataArray);
	if (defaultValue) {
		selectElement.value = defaultValue;
	}
}

// Populate all select elements
populateSelect("currentDistro", distros, true);
populateSelect("graphicalEnv", desktopEnvironments, true);
populateSelect("shell", shells, true);
populateSelect("terminal", terminals, true);

// Initialize DOM cache and load saved data
DOM.init();
const savedData = loadFromStorage();
if (savedData) {
	if ("name" in savedData) {
		DOM.name.value = savedData.name;
	}
	if ("username" in savedData) {
		DOM.username.value = savedData.username;
	}
	if ("verified" in savedData) {
		DOM.verified.checked = savedData.verified;
	}
	if ("currentDistro" in savedData) {
		DOM.currentDistro.value = savedData.currentDistro;
	}
	if ("graphicalEnv" in savedData) {
		DOM.graphicalEnv.value = savedData.graphicalEnv;
	}
	if ("shell" in savedData) {
		DOM.shell.value = savedData.shell;
	}
	if ("terminal" in savedData) {
		DOM.terminal.value = savedData.terminal;
	}
	if ("kernel" in savedData) {
		DOM.kernel.value = savedData.kernel;
	}
}

// Create debounced update function
const DEBOUNCE_DELAY = 300;
const debouncedUpdate = debounce(update, DEBOUNCE_DELAY);

// Add event listeners with validation
if (DOM.name) {
	DOM.name.addEventListener("input", () => {
		validateInput("name", MAX_LENGTHS.name);
		debouncedUpdate();
	});
	DOM.name.addEventListener("change", update);
}

if (DOM.username) {
	DOM.username.addEventListener("input", () => {
		validateInput("username", MAX_LENGTHS.username);
		debouncedUpdate();
	});
	DOM.username.addEventListener("change", update);
}

if (DOM.kernel) {
	DOM.kernel.addEventListener("input", () => {
		validateInput("kernel", MAX_LENGTHS.kernel);
		debouncedUpdate();
	});
	DOM.kernel.addEventListener("change", update);
}

for (const element of [
	DOM.verified,
	DOM.currentDistro,
	DOM.graphicalEnv,
	DOM.shell,
	DOM.terminal,
]) {
	if (element) {
		element.addEventListener("change", update);
	}
}

// Theme switching
const themeBtns = document.querySelectorAll(".theme-btn");
const accentBtns = document.querySelectorAll(".accent-btn");
const html = document.documentElement;
const savedTheme = localStorage.getItem("theme") || "dim";
const savedAccent = localStorage.getItem("accent") || "blue";

function setTheme(theme) {
	html.setAttribute("data-theme", theme);
	localStorage.setItem("theme", theme);

	// Update active button
	for (const btn of themeBtns) {
		btn.classList.remove("active");
		if (btn.dataset.theme === theme) {
			btn.classList.add("active");
		}
	}

	// Update favicon with new theme background (use current accent from attribute)
	const currentAccent = html.getAttribute("data-accent") || "blue";
	updateFavicon(currentAccent);
}

function setAccent(accent) {
	html.setAttribute("data-accent", accent);
	localStorage.setItem("accent", accent);

	// Update active button
	for (const btn of accentBtns) {
		btn.classList.remove("active");
		if (btn.dataset.accent === accent) {
			btn.classList.add("active");
		}
	}

	// Update favicon with accent color
	updateFavicon(accent);
}

function updateFavicon(accent) {
	const currentTheme = html.getAttribute("data-theme") || "dim";
	const backgroundColor = THEME_BACKGROUNDS[currentTheme] || THEME_BACKGROUNDS.dim;
	const penguinColor = ACCENT_COLORS[accent] || ACCENT_COLORS.blue;

	const svgString = `<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" width="32" height="32"><circle cx="16" cy="16" r="16" fill="${backgroundColor}"/><g fill="${penguinColor}" transform="translate(4, 4)"><path d="M14.62,8.35c-.42.28-1.75,1-1.95,1.19a.82.82,0,0,1-1.14,0c-.2-.16-1.53-.92-1.95-1.19s-.45-.7.08-.92a6.16,6.16,0,0,1,4.91,0c.49.21.51.6,0,.9m7.22,7.28A19.09,19.09,0,0,0,18,10a4.31,4.31,0,0,1-1.06-1.88c-.1-.33-.17-.67-.24-1A11.32,11.32,0,0,0,16,4.47,4.06,4.06,0,0,0,12.16,2,4.2,4.2,0,0,0,8.21,4.4a5.9,5.9,0,0,0-.46,1.34c-.17.76-.32,1.55-.5,2.32a3.38,3.38,0,0,1-1,1.71,19.53,19.53,0,0,0-3.88,5.35A6.09,6.09,0,0,0,2,16c-.19.66.29,1.12,1,1,.44-.09.88-.18,1.3-.31s.57,0,.67.35a6.73,6.73,0,0,0,4.24,4.5c4.12,1.56,8.93-.66,10-4.58.07-.27.17-.37.47-.27.46.14.93.24,1.4.35a.72.72,0,0,0,.92-.64,1.44,1.44,0,0,0-.16-.73"/></g></svg>`;
	const dataUrl = `data:image/svg+xml;base64,${btoa(svgString)}`;

	let link = document.querySelector("link[rel='icon']");
	if (!link) {
		link = document.createElement("link");
		link.rel = "icon";
		link.type = "image/svg+xml";
		document.head.appendChild(link);
	}
	link.href = dataUrl;
}

// Set initial theme and accent
setTheme(savedTheme);
setAccent(savedAccent);

// Add click listeners for theme buttons
for (const btn of themeBtns) {
	btn.addEventListener("click", () => {
		setTheme(btn.dataset.theme);
	});
}

// Add click listeners for accent buttons
for (const btn of accentBtns) {
	btn.addEventListener("click", () => {
		setAccent(btn.dataset.accent);
	});
}

// Copy and Download functionality
async function captureDetailsPage() {
	const detailsPage = document.querySelector(".details-page");
	// Wait for images to load
	const images = detailsPage.querySelectorAll("img");
	await Promise.all(
		Array.from(images).map((img) => {
			return new Promise((resolve) => {
				if (img.complete) {
					resolve();
				} else {
					img.onload = resolve;
					img.onerror = resolve;
				}
			});
		})
	);

	try {
		// biome-ignore lint/correctness/noUndeclaredVariables: html2canvas is loaded as global script
		const canvas = await html2canvas(detailsPage, {
			backgroundColor: null,
			scale: 2,
			logging: false,
		});
		return canvas;
	} catch (error) {
		console.error("Error capturing image:", error);
		return null;
	}
}

const COPY_ANIMATION_DELAY = 600;
const DOWNLOAD_ANIMATION_DELAY = 1500;

if (DOM.copyBtn) {
	DOM.copyBtn.addEventListener("click", async () => {
		const originalText = DOM.copyBtnText.textContent;

		// Disable buttons and trigger animation immediately
		DOM.copyBtn.disabled = true;
		DOM.downloadBtn.disabled = true;
		DOM.copyBtn.classList.add("copied");
		DOM.copyBtnText.textContent = "Copied!";

		const canvas = await captureDetailsPage();
		if (!canvas) {
			DOM.copyBtn.disabled = false;
			DOM.downloadBtn.disabled = false;
			return;
		}

		canvas.toBlob(async (blob) => {
			try {
				await navigator.clipboard.write([
					new ClipboardItem({
						"image/png": blob,
					}),
				]);

				setTimeout(() => {
					DOM.copyBtnText.textContent = originalText;
					DOM.copyBtn.classList.remove("copied");
					DOM.copyBtn.disabled = false;
					DOM.downloadBtn.disabled = false;
				}, COPY_ANIMATION_DELAY);
			} catch (error) {
				console.error("Error copying to clipboard:", error);
				DOM.copyBtnText.textContent = "Failed to copy";
				setTimeout(() => {
					DOM.copyBtnText.textContent = originalText;
					DOM.copyBtn.classList.remove("copied");
					DOM.copyBtn.disabled = false;
					DOM.downloadBtn.disabled = false;
				}, DOWNLOAD_ANIMATION_DELAY);
			}
		});
	});
}

if (DOM.downloadBtn) {
	DOM.downloadBtn.addEventListener("click", async () => {
		// Disable buttons during processing
		DOM.copyBtn.disabled = true;
		DOM.downloadBtn.disabled = true;

		const canvas = await captureDetailsPage();
		if (!canvas) {
			DOM.copyBtn.disabled = false;
			DOM.downloadBtn.disabled = false;
			return;
		}

		canvas.toBlob((blob) => {
			const url = URL.createObjectURL(blob);
			const link = document.createElement("a");
			link.href = url;
			link.download = `unixcard-${Date.now()}.png`;
			document.body.appendChild(link);
			link.click();
			document.body.removeChild(link);
			URL.revokeObjectURL(url);

			// Re-enable buttons after download
			DOM.copyBtn.disabled = false;
			DOM.downloadBtn.disabled = false;
		});
	});
}

update();
